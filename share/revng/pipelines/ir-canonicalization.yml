#
# Copyright (c) rev.ng Labs Srl. See LICENSE.md for details.
#

Containers:
 - Name:            model_header.h
   Type:            ModelHeaderFile
 - Name:            helpers_header.h
   Type:            HelpersHeaderFile
 - Name:            decompiled.yml
   Type:            DecompiledCCode
From:            LateOptimizeForDecompilation
Containers:
Steps:
 - Name:            DataLayoutAnalysis
   Pipes:
     - Type:             LLVMPipe
       UsedContainers: [module.ll]
       Passes:
         - dla
 - Name:            IRCanonicalization
   Pipes:
     - Type:             LLVMPipe
       UsedContainers: [module.ll]
       Passes:
         - make-model-gep
         - early-cse
         - dce
         - exit-ssa
         - twoscomplement-normalization
         - add-assignment-markers
 - Name:            PrintModelHeader
   Pipes:
     - Type:             ModelToHeader
       UsedContainers: [input, model_header.h]
 - Name:            PrintHelpersHeader
   Pipes:
     - Type:             HelpersToHeader
       UsedContainers: [module.ll, helpers_header.h]
 - Name:            DecompileToC
   Pipes:
     - Type:             CDecompilation
       UsedContainers: [module.ll, model_header.h, helpers_header]
